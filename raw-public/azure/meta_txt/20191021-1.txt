RCA - Service Management Errors - East US 2 (Tracking ID 4_69-3D8)
Summary of Impact: Between 10:08 and 23:37 UTC on 21 Oct 2019, a subset of customers in East US 2 may have received error notifications or experienced high latency when performing service management operations - such as create, update, or delete - for resources hosted in this region. Additionally, customers using Azure Databricks and/or Data Factory v2 may have encountered service management errors in multiple regions. A very limited subset of customers using Virtual Machines with SQL Server images, or other SQL IaaS offerings, may have also encountered errors performing service management operations on resources hosted in East US 2.
Root Cause: Engineers had investigated and found that an internal service, “service fabric cluster manager”, was near capacity due to the legacy hardware that was being used. Around 9:00 UTC on 21 Oct 2019, a regular operation spike caused the cluster manager to reach its capacity limit, resulting in queueing and increased latency. The increased latency triggered retries on the Regional Network control plane service (RNM), which then went into a feedback loop, causing operations to queue up and forced the Regional Network Manager (RNM) into a state where it was not able to recover.
Mitigation: Engineers moved the cluster manager from the legacy hardware to new Gen5 hardware to mitigate.
Next Steps: We sincerely apologize for the impact to affected customers. We are continuously taking steps to improve the Microsoft Azure Platform and our processes to help ensure
such incidents do not occur in the future. In this case, this includes (but is not limited to):
Moving the cluster manager to the latest Gen5 hardware in all regions.
Implementing caching on the gateway to reduce frequent calls to the cluster manager, which will help with reducing the load. Improving the Regional Network Manager (RNM) operation feedback loops to no longer queue up operations indefinitely.
Provide Feedback: Please help us improve the Azure customer communications experience by taking our survey: https://aka.ms/4_69-3D8