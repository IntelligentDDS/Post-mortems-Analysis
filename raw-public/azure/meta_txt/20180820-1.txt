RCA - Storage - West Europe
Summary of impact: Between 08:40 and 13:43 UTC on 20 Aug, 2018, a subset of customers using Azure Storage may have been unable to create ARM storage accounts in West Europe. Customers may have received 400 HTTP Bad Request responses with an error code of “RequestIsNotValidJson” even for valid, well-formed requests.  Customers attempting to deploy a new VM in the affected regions may have also encountered failures due to this issue. Other services and operations which rely on the creation of storage accounts would have similarly been impacted.  Other storage service management operations were not impacted. Reading and writing data within existing storage accounts was also not affected. Customer impact workaround: Customers may have chosen to use an existing account or create a new account in an unaffected region or create classic storage accounts. Root cause and mitigation: The incident was caused by a bug in the Storage Resource Provider (SRP). The bug was triggered in the create account path when we were evaluating the scale unit to create the account in. The bug only manifests under specific configuration settings which was only present in West Europe. Due to the bug, customers would have experienced account creation failures. The bug was not found during testing, and the service had been deployed to other production regions without issue before encountering the incident in West Europe.  Engineers mitigated the issue by making a configuration update.  Next steps: We sincerely apologize for the impact to affected customers. We are continuously taking steps to improve the Microsoft Azure Platform and our processes to help ensure such incidents do not occur in the future. 1) We are working on a fix to make the account creation more robust in the event of a similar bug should they re-occur in the future [in progress]. 2) We are also working on completing implementation of per-region flighting of new deployments for Storage with automatic rollback whenever core scenarios are impacted [in progress]. Provide feedback: Please help us improve the Azure customer communications experience by taking our survey https://aka.ms/G4XN-Y_Z (https://aka.ms/G4XN-Y_Z) 