RCA - Intermittent Network Related Timeouts - West US
Summary of impact: Between 00:53 UTC and 03:33 UTC on 30 Jan 2019, a subset of customers in West US may have experienced degraded performance, network drops or time outs when accessing Azure resources hosted in this region. Applications and resources that retried connections or requests may have succeeded due to multiple redundant network devices and routes available within Azure data centers.
Workaround: Retries likely to succeed via alternate network device and routes. Services in other availability zones unaffected.
Root cause: A network device in the US West region experienced a FIB/Linecard problem during a routine firmware update. As a result of the invalid programming, this device was unable to forward all dataplane traffic it was expected to carry, and dropped traffic to some destinations. The Azure network fabric failed to automatically remove this device from service and the device dropped a subset of the outbound network traffic passed through this device. For the duration of the incident, approximately 6% of the available network links in and out of the impacted datacenter were partially impacted. The network device encountered a previously unknown software issue, and was unable to fully program all linecards on it. This led to the device advertising prefixes that were not reachable.
Mitigation: The impacted device was identified and manually removed from service by Azure engineers, the network automatically recovered utilizing alternate network devices. The automated process for updating configuration and firmware detected that the devices had become unhealthy after the update and ceased updating any additional devices.
Next steps: We sincerely apologize for the impact to affected customers. We are continuously taking steps to improve the Microsoft Azure Platform and our processes to help ensure such incidents do not occur in the future. In this case, this includes (but is not limited to):
Additional monitoring to detect repeats of this device issue (complete)
Improvement in the system for validating device health after changes to validate fib/rib status. (In Progress) Alerting to detect traffic imbalances on upstream traffic (complete)
Process updates to add manual checks for this impacting scenario (complete)
Provide feedback: Please help us improve the Azure customer communications experience by taking our survey: https://aka.ms/QCF2-PXZ